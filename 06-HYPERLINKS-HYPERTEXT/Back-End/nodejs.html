<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Node.js - Backend Technology</title>
</head>
<body>
    <nav>
        <p><a href="../web-dev.html">‚Üê Back to Web Development Overview</a> | 
           <a href="java.html">‚Üê Previous: Java</a> | 
           <a href="../Database/mysql.html">Next: Database Technologies ‚Üí</a></p>
    </nav>
    
    <h1>üü¢ Node.js</h1>
    
    <div>
        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="Node.js Logo" width="100" height="100">
    </div>
    
    <h2>What is Node.js?</h2>
    <p>Node.js is a JavaScript runtime built on Chrome's V8 JavaScript engine. It allows developers to run JavaScript on the server-side, enabling full-stack JavaScript development. Node.js is known for its event-driven, non-blocking I/O model that makes it lightweight and efficient.</p>
    
    <h2>üéØ Key Features of Node.js</h2>
    <ul>
        <li><strong>JavaScript Everywhere:</strong> Use JavaScript for both frontend and backend</li>
        <li><strong>Non-blocking I/O:</strong> Asynchronous and event-driven architecture</li>
        <li><strong>Fast Execution:</strong> Built on Google's V8 JavaScript engine</li>
        <li><strong>NPM Ecosystem:</strong> Largest package repository in the world</li>
        <li><strong>Single-threaded:</strong> Uses event loop for handling requests</li>
        <li><strong>Cross-platform:</strong> Runs on Windows, macOS, and Linux</li>
        <li><strong>Scalable:</strong> Perfect for building scalable network applications</li>
    </ul>
    
    <h2>üèóÔ∏è Node.js Basics</h2>
    
    <h3>Installation and Setup:</h3>
    <pre>
# Check if Node.js is installed
node --version
npm --version

# Initialize a new Node.js project
npm init -y

# Install packages
npm install express
npm install --save-dev nodemon
    </pre>
    
    <h3>Basic Node.js Server:</h3>
    <pre>
// server.js
const http = require('http');

const server = http.createServer((req, res) => {
    res.writeHead(200, { 'Content-Type': 'text/html' });
    res.end('&lt;h1&gt;Hello from Node.js Server!&lt;/h1&gt;');
});

const PORT = process.env.PORT || 3000;
server.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});
    </pre>
    
    <h3>Working with Modules:</h3>
    <pre>
// math.js (Custom module)
function add(a, b) {
    return a + b;
}

function subtract(a, b) {
    return a - b;
}

module.exports = { add, subtract };

// app.js (Using the module)
const { add, subtract } = require('./math');

console.log(add(5, 3));      // 8
console.log(subtract(5, 3)); // 2
    </pre>
    
    <h2>üåê Express.js Framework</h2>
    
    <h3>What is Express.js?</h3>
    <p>Express.js is a minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications. It's the most popular Node.js framework.</p>
    
    <h3>Basic Express Server:</h3>
    <pre>
const express = require('express');
const app = express();

// Middleware
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Routes
app.get('/', (req, res) => {
    res.send('Hello from Express!');
});

app.get('/api/users', (req, res) => {
    const users = [
        { id: 1, name: 'John Doe', email: 'john@example.com' },
        { id: 2, name: 'Jane Smith', email: 'jane@example.com' }
    ];
    res.json(users);
});

app.post('/api/users', (req, res) => {
    const { name, email } = req.body;
    const newUser = { id: Date.now(), name, email };
    res.status(201).json(newUser);
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});
    </pre>
    
    <h3>Express Middleware:</h3>
    <pre>
// Custom middleware
const logger = (req, res, next) => {
    console.log(`${req.method} ${req.url} - ${new Date().toISOString()}`);
    next();
};

// Error handling middleware
const errorHandler = (err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({ error: 'Something went wrong!' });
};

// Using middleware
app.use(logger);
app.use('/api', apiRoutes);
app.use(errorHandler);
    </pre>
    
    <h2>üì¶ NPM and Package Management</h2>
    
    <h3>Package.json:</h3>
    <pre>
{
  "name": "my-node-app",
  "version": "1.0.0",
  "description": "A Node.js application",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "jest"
  },
  "dependencies": {
    "express": "^4.18.0",
    "mongoose": "^6.3.0",
    "bcryptjs": "^2.4.3",
    "jsonwebtoken": "^8.5.1"
  },
  "devDependencies": {
    "nodemon": "^2.0.16",
    "jest": "^28.1.0"
  }
}
    </pre>
    
    <h3>Popular Node.js Packages:</h3>
    <ul>
        <li><strong>express:</strong> Web application framework</li>
        <li><strong>mongoose:</strong> MongoDB object modeling</li>
        <li><strong>lodash:</strong> Utility library</li>
        <li><strong>axios:</strong> HTTP client</li>
        <li><strong>bcryptjs:</strong> Password hashing</li>
        <li><strong>jsonwebtoken:</strong> JWT implementation</li>
        <li><strong>cors:</strong> Cross-Origin Resource Sharing</li>
        <li><strong>dotenv:</strong> Environment variables</li>
    </ul>
    
    <h2>üóÑÔ∏è Database Integration</h2>
    
    <h3>MongoDB with Mongoose:</h3>
    <pre>
const mongoose = require('mongoose');

// Connect to MongoDB
mongoose.connect('mongodb://localhost:27017/myapp', {
    useNewUrlParser: true,
    useUnifiedTopology: true
});

// Define Schema
const userSchema = new mongoose.Schema({
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

// Create Model
const User = mongoose.model('User', userSchema);

// Using the model
app.post('/api/users', async (req, res) => {
    try {
        const user = new User(req.body);
        await user.save();
        res.status(201).json(user);
    } catch (error) {
        res.status(400).json({ error: error.message });
    }
});

app.get('/api/users', async (req, res) => {
    try {
        const users = await User.find();
        res.json(users);
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});
    </pre>
    
    <h3>MySQL with mysql2:</h3>
    <pre>
const mysql = require('mysql2/promise');

// Create connection
const connection = await mysql.createConnection({
    host: 'localhost',
    user: 'root',
    password: 'password',
    database: 'myapp'
});

// Query database
app.get('/api/users', async (req, res) => {
    try {
        const [rows] = await connection.execute('SELECT * FROM users');
        res.json(rows);
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});

app.post('/api/users', async (req, res) => {
    try {
        const { name, email } = req.body;
        const [result] = await connection.execute(
            'INSERT INTO users (name, email) VALUES (?, ?)',
            [name, email]
        );
        res.status(201).json({ id: result.insertId, name, email });
    } catch (error) {
        res.status(400).json({ error: error.message });
    }
});
    </pre>
    
    <h2>üîê Authentication and Security</h2>
    
    <h3>JWT Authentication:</h3>
    <pre>
const jwt = require('jsonwebtoken');
const bcrypt = require('bcryptjs');

// Register user
app.post('/api/register', async (req, res) => {
    try {
        const { name, email, password } = req.body;
        
        // Hash password
        const hashedPassword = await bcrypt.hash(password, 10);
        
        // Create user
        const user = new User({ name, email, password: hashedPassword });
        await user.save();
        
        // Generate token
        const token = jwt.sign({ userId: user._id }, process.env.JWT_SECRET);
        
        res.status(201).json({ token, user: { id: user._id, name, email } });
    } catch (error) {
        res.status(400).json({ error: error.message });
    }
});

// Login user
app.post('/api/login', async (req, res) => {
    try {
        const { email, password } = req.body;
        
        // Find user
        const user = await User.findOne({ email });
        if (!user) {
            return res.status(401).json({ error: 'Invalid credentials' });
        }
        
        // Check password
        const isMatch = await bcrypt.compare(password, user.password);
        if (!isMatch) {
            return res.status(401).json({ error: 'Invalid credentials' });
        }
        
        // Generate token
        const token = jwt.sign({ userId: user._id }, process.env.JWT_SECRET);
        
        res.json({ token, user: { id: user._id, name: user.name, email } });
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});

// Auth middleware
const auth = (req, res, next) => {
    const token = req.header('Authorization')?.replace('Bearer ', '');
    
    if (!token) {
        return res.status(401).json({ error: 'Access denied' });
    }
    
    try {
        const decoded = jwt.verify(token, process.env.JWT_SECRET);
        req.userId = decoded.userId;
        next();
    } catch (error) {
        res.status(401).json({ error: 'Invalid token' });
    }
};

// Protected route
app.get('/api/profile', auth, async (req, res) => {
    try {
        const user = await User.findById(req.userId).select('-password');
        res.json(user);
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});
    </pre>
    
    <h2>üöÄ RESTful API Development</h2>
    
    <h3>Complete CRUD API:</h3>
    <pre>
const express = require('express');
const router = express.Router();

// GET /api/users - Get all users
router.get('/', async (req, res) => {
    try {
        const users = await User.find().select('-password');
        res.json(users);
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});

// GET /api/users/:id - Get user by ID
router.get('/:id', async (req, res) => {
    try {
        const user = await User.findById(req.params.id).select('-password');
        if (!user) {
            return res.status(404).json({ error: 'User not found' });
        }
        res.json(user);
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});

// POST /api/users - Create new user
router.post('/', async (req, res) => {
    try {
        const user = new User(req.body);
        await user.save();
        res.status(201).json(user);
    } catch (error) {
        res.status(400).json({ error: error.message });
    }
});

// PUT /api/users/:id - Update user
router.put('/:id', async (req, res) => {
    try {
        const user = await User.findByIdAndUpdate(
            req.params.id,
            req.body,
            { new: true, runValidators: true }
        ).select('-password');
        
        if (!user) {
            return res.status(404).json({ error: 'User not found' });
        }
        
        res.json(user);
    } catch (error) {
        res.status(400).json({ error: error.message });
    }
});

// DELETE /api/users/:id - Delete user
router.delete('/:id', async (req, res) => {
    try {
        const user = await User.findByIdAndDelete(req.params.id);
        if (!user) {
            return res.status(404).json({ error: 'User not found' });
        }
        res.json({ message: 'User deleted successfully' });
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});

module.exports = router;
    </pre>
    
    <h2>üß™ Testing Node.js Applications</h2>
    
    <h3>Unit Testing with Jest:</h3>
    <pre>
// math.test.js
const { add, subtract } = require('./math');

describe('Math functions', () => {
    test('add function should return correct sum', () => {
        expect(add(2, 3)).toBe(5);
        expect(add(-1, 1)).toBe(0);
        expect(add(0, 0)).toBe(0);
    });
    
    test('subtract function should return correct difference', () => {
        expect(subtract(5, 3)).toBe(2);
        expect(subtract(1, 1)).toBe(0);
        expect(subtract(0, 5)).toBe(-5);
    });
});
    </pre>
    
    <h3>API Testing with Supertest:</h3>
    <pre>
const request = require('supertest');
const app = require('./app');

describe('User API', () => {
    test('GET /api/users should return all users', async () => {
        const response = await request(app)
            .get('/api/users')
            .expect(200);
        
        expect(Array.isArray(response.body)).toBe(true);
    });
    
    test('POST /api/users should create new user', async () => {
        const newUser = {
            name: 'Test User',
            email: 'test@example.com'
        };
        
        const response = await request(app)
            .post('/api/users')
            .send(newUser)
            .expect(201);
        
        expect(response.body.name).toBe(newUser.name);
        expect(response.body.email).toBe(newUser.email);
    });
});
    </pre>
    
    <h2>üîß Node.js Best Practices</h2>
    <ol>
        <li><strong>Use environment variables:</strong> Store configuration in .env files</li>
        <li><strong>Handle errors properly:</strong> Use try-catch and error middleware</li>
        <li><strong>Use async/await:</strong> Avoid callback hell</li>
        <li><strong>Validate input:</strong> Use libraries like Joi or express-validator</li>
        <li><strong>Use middleware:</strong> Keep code modular and reusable</li>
        <li><strong>Log properly:</strong> Use logging libraries like Winston</li>
        <li><strong>Security:</strong> Use helmet, rate limiting, and input sanitization</li>
        <li><strong>Monitor performance:</strong> Use tools like PM2 for production</li>
    </ol>
    
    <h2>üöÄ Deployment and Production</h2>
    
    <h3>Environment Configuration:</h3>
    <pre>
// .env file
NODE_ENV=production
PORT=3000
MONGODB_URI=mongodb://localhost:27017/myapp
JWT_SECRET=your-secret-key
    </pre>
    
    <h3>Production Setup:</h3>
    <pre>
// Use PM2 for process management
npm install -g pm2

// Start application
pm2 start server.js --name "my-app"

// Monitor application
pm2 monitor

// Restart application
pm2 restart my-app
    </pre>
    
    <h2>üìà Node.js Career Opportunities</h2>
    
    <h3>Job Roles:</h3>
    <ul>
        <li>Backend Developer</li>
        <li>Full-Stack Developer</li>
        <li>API Developer</li>
        <li>Microservices Developer</li>
        <li>DevOps Engineer</li>
        <li>Technical Lead</li>
        <li>Software Architect</li>
    </ul>
    
    <h3>Popular Use Cases:</h3>
    <ul>
        <li>REST APIs and GraphQL</li>
        <li>Real-time applications (Chat, Gaming)</li>
        <li>Microservices architecture</li>
        <li>IoT applications</li>
        <li>Command-line tools</li>
        <li>Desktop applications (Electron)</li>
    </ul>
    
    <h2>üìñ Learning Resources</h2>
    <ul>
        <li><a href="https://nodejs.org/en/docs/" target="_blank">Official Node.js Documentation</a></li>
        <li><a href="https://expressjs.com/" target="_blank">Express.js Documentation</a></li>
        <li><a href="https://www.npmjs.com/" target="_blank">NPM Package Repository</a></li>
        <li><a href="https://nodeschool.io/" target="_blank">NodeSchool Interactive Tutorials</a></li>
        <li><a href="https://www.freecodecamp.org/" target="_blank">freeCodeCamp Node.js Course</a></li>
        <li><a href="https://www.udemy.com/topic/nodejs/" target="_blank">Udemy Node.js Courses</a></li>
    </ul>
    
    <h2>üí° Why Learn Node.js?</h2>
    <ul>
        <li><strong>JavaScript Everywhere:</strong> Use one language for full-stack development</li>
        <li><strong>High Performance:</strong> Fast, non-blocking I/O operations</li>
        <li><strong>Large Ecosystem:</strong> Huge NPM package repository</li>
        <li><strong>Industry Adoption:</strong> Used by Netflix, Uber, LinkedIn, and more</li>
        <li><strong>Real-time Applications:</strong> Perfect for chat apps, gaming, IoT</li>
        <li><strong>Microservices:</strong> Ideal for microservice architecture</li>
        <li><strong>Career Growth:</strong> High demand and excellent salaries</li>
        <li><strong>Community:</strong> Large, active developer community</li>
    </ul>
    
    <h2>üîó Related Technologies</h2>
    <ul>
        <li><a href="python.html">‚Üê Python - Beginner-Friendly Backend</a></li>
        <li><a href="java.html">‚Üê Java - Enterprise Backend</a></li>
        <li><a href="../Front-End/js.html">‚Üê JavaScript - Frontend Development</a></li>
        <li><a href="../Database/mysql.html">MySQL - Relational Database ‚Üí</a></li>
        <li><a href="../Database/mongodb.html">MongoDB - NoSQL Database ‚Üí</a></li>
    </ul>
    
    <hr>
    
    <footer>
        <p><strong>Navigation:</strong></p>
        <ul>
            <li><a href="../web-dev.html">‚Üê Back to Web Development Overview</a></li>
            <li><a href="java.html">‚Üê Previous: Java</a></li>
            <li><a href="../Database/mysql.html">Next: Learn MySQL ‚Üí</a></li>
        </ul>
    </footer>
</body>
</html>